<?xml version="1.0" encoding="UTF-8"?>
<project name="main" default="convertToJSON" basedir="../">
    <description>
        Serves for conversion properties file to JSON format.
    </description>

    <property name="app.name" value="Convert Properties to JSON"/>
    <property file="json-converter.properties"/>

    <!--####### target: compile #######-->
    <target name="compile">
        <echo>Compiling sources of converter...</echo>
        <mkdir dir="${binDir}"/>
        <javac srcdir="${srcDir}" destdir="${binDir}" includeantruntime="true"/>
        <echo>Sources compiled to '${binDir}'!</echo>
    </target>

    <!--####### target: convertToJSON #######-->
    <target name="convertToJSON">
        <available file="${srcFilename}" property="fileExists"/>
        <fail message="File '${srcFilename}' does not exist!" unless="fileExists"/>
        <taskdef name="convert" classname="cz.zcu.kiv.jsonconverter.Converter" classpath="${binDir}"/>
        <echo>Converting...</echo>
        <convert srcfilename="${srcFilename}" destfilename="${destFilename}" saveasjson="${saveAsJSON}"/>
        <echo>File '${srcFilename}' has been converted to '${destFilename}'!</echo>
    </target>

</project>